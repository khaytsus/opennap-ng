<!-- $Id: manual.html 425 2006-01-06 19:41:50Z khaytsus $ -->
<html>
<head>
<title>
OpenNap-NG Reference Manual
</title>
</head>
<body>
<center>
<h1>OpenNap-NG Reference Manual</h1>
<p>
Version 0.47
<p>
<a href="mailto:khaytsus@opennap-ng.org">khaytsus@opennap-ng.org</a> 
</center>

<h2>Table of Contents</h2>
<ul>
<li><a href="#intro">Introduction</a>
<li><a href="#install">Installation</a>
<li><a href="#files">Files</a>
	<ul>
        <li><a href="#bans">bans</a> 
        <li><a href="#block">block</a> 
        <li><a href="#channels">channels</a>
        <li><a href="#config">config</a>
        <li><a href="#filter">filter</a>
        <li><a href="#motd">motd</a>    
        <li><a href="#servers">servers</a>
        <li><a href="#user">user</a>
	</ul>
<li><a href="#admin">Administration</a>
	<ul>
	<li><a href="#chanserv">ChanServ</a>
	<li><a href="#nickserv">NickServ</a>
	<li><a href="#operserv">OperServ</a>
	</ul>
<li><a href="#help">Getting Help</a>
	<ul>
	<li><a href="#lists">Mailing Lists</a>
	<li><a href="#web">Web Forums</a>
	</ul>
<li><a href="#glossary">Glossary</a>
</ul>

<h2><a name="intro">Introduction</a></h2>

<a href="http://www.napster.com">Napster</a> is a distributed file sharing
service which allows users to transfer files directly between their clients.
A centralized server keeps track of all available files and provides clients
the ability to search the index of available files. In addition, instant
messages (private chat) and group chat services similar to <a
href="http://www.irchelp.org">IRC</a> are also provided.
<p>
<a href="http://opennap-ng.org"><i>OpenNap-NG</i></a> is an <a href="http://www.opensource.org">Open Source</a>
effort to create a version of the proprietary Napster server. We want to express our thanx here to 
<a href="mailto:drscholl@users.sourceforge.net">drscholl</a>, who made an excellent job of programming.
<p>
<p><i>OpenNap-NG</i> is the new generation of Opennap, after drscholl had ceased to develop any further. Many new features have been included.
<p>We would gladly welcome everyone who also has got new ideas and wants to participate in this project.

<p>We also want to announce that we want to merge this fork of opennap with drscholls as soon as he reappears. The main goal is a common codebase.

<p>
The most current version of this document can be obtained
<a href="http://opennap-ng.org/manual.html">here</a>.

<h2><a name="install">Installation</a></h2>

<h3>Unix Platforms</h3>

After you have unpacked the source, or obtained the <a href="#cvs">CVS
version</a>, run the provided <i>configure</i> script. The following
options are of note:
<ul>
<li>--enable-email<p>
Enables support for storing the email addresses of users obtained from the
nickname registration command. By default this information is not kept and
the server will always return <i>unknown</i> if this information is
requested.
<p>

<li>--enable-resume<p>
Enables the server-side support for resuming downloads. This option makes
the server use more memory because it has to store to MD5 hash values for
all shared files in addition to the other information. Note that the most
popular client currently does support resuming (Lopster 1.0.1-dev4.XX).
<p>

<li>--enable-router<p>
Compiles a <i>routing-only</i> version of the OpenNap-NG server. This disables
the file sharing commands for local clients, only allows users of level <a
href="#admin">Admin</a> or greater to log in, and simply routes all other
messages to linked servers. This is ideal for use as a hub server to
connect a cluster of other servers together.
<p>

<li>--enable-chroot<p>
Compile support for running OpenNap-NG in a chroot() jail. This prevents the
server from being able to read/write any files outside of its data
directory. Useful for parnoid people. OpenNap-NG must be run setuid root (at
which point it will drop privs) in order for this to work.
<p>

<li>--enable-version-stats<p>
Causes the server to keep a running count of each version of connecting
clients. Useless, but fun information for client developers to see how much
their particular clients are getting used on the server.
<p>

<li>--with-fd-setsize=SIZE<p>
Under BSD systems, this sets the hard maximum number of connections the
server can support via the select() system call. <b>Note:</b> under Linux
FD_SETSIZE can not be redefined and is always 1024.
<p>

<li>--enable-debug<p>
Turns on debugging information to catch memory leaks and buffer overruns.
This is usually not suitable for "production" environments because of the
extra memory use, but good for small test servers. The more testing the
more likely bugs can be squashed.
<p>

<li>--enable-gprof<p>
Adds the <tt>-pg</tt> option to <tt>gcc</tt> to generate profiling
information suitable for digestion by <tt>gprof</tt>. Profiling gives a
detailed output of what the server is spending its time doing so that
bottlenecks can be detected and server performance can be increased.
<p>

</ul>
Once you have run the <i>configure</i> script, simply type <tt>make</tt>.
At this point you may wish to run <tt>make install</tt> to install OpenNap-NG
in the default location, but this is not required for the server to run.

<h2><a name="files">Files</a></h2>

OpenNap-NG uses several different configuration files. Typically they are
stored in /usr/local/share/opennap-ng for UNIX platforms, and C:\opennap for
Win32 platforms.

<ul>
<li><a href="#bans">bans</a> - list of server-wide bans on clients
<li><a href="#block">block</a> - list of files to block
<li><a href="#config">config</a> - main configuration file containing server options
<li><a href="#channels">channels</a> - database of predefined group chat channels             
<li><a href="#filter">filter</a> - list of words to skip when searching/indexing files
<li><a href="#motd">motd</a> - message of the day, the text shown to users when
they log in
<li><a href="#servers">servers</a> - database of servers to link with
<li><a href="#user">users</a> - registered users database
</ul>

<hr>

<h3><a name="bans">Bans</a></h3>
The <tt>bans</tt> file contains a persistent list of server-wide bans.  The
server will read this upon startup, and then dump its current list when it
shuts down.  If you need to edit this file, you must shut down the server
prior to editing it, or your changes will be lost.
<p>
Each line in this file should be of the form:
<pre>
	&lt;target> &lt;nick> &lt;when> "&lt;reason>" [timeout]
</pre>
where <i>target</i> is what is banned, <i>nick</i> is the user that issued
the ban, <i>when</i> is the time at which the ban was set (in seconds since
Jan 1, 1970 0:00 UTC), and <i>reason</i> is the reason for the ban.
<p>
Optionally, <i>timeout</i> may be specified which gives the time at which
the ban expires and should be removed.

<p>
See the <tt>sample.ban</tt> file as a basis to start your own
configuration.

<hr>
<h3><a name="block">Block</a></h3>

This file contains a list of regular expressions, one per line, which are
matched against every file that a client attempts to share.  If a file
matches any of the regular expressions, it will not be indexed by the
server.  No error message is sent back to the client, and no log message
will be printed.  The file is just silently ignored.
<p>
Lines that begin with a hash (#) are considered to be a comment, and are
ignored.
<p>
See the <tt>sample.block</tt> file as a basis to start your own
configuration.

<hr>
<h3><a name="config">Config</a></h3>

Configuration directives are one per line, of the form:
<p>
<i>var</i> <i>value</i>
<p>
Each of the <i>value</i>s is a string, integer, or list, depending on the
variable.
<br> <p>
<b>protnet</b> *<br>   
Type: string list<br>
Default : * <br> <p>
Protnet is a set of protections granted to an Elite user on
the defined IP or list of IPs.  The elite is protected from
being killed, mkilled, their password changed, or account
nuked, and their server killed, by someone NOT on the protnet, 
even if they are elite.  The default setting works like normal,
any elite can kill other elites, etc.  Note, the protection only
works on your own server, it can't protect you on another server,
etc.<br><br>

Example:  protnet 128.1.128.1,192.168.0.*<br>

<p>
<b>invalid_clients</b> <br>
Type: string list<br>
Default : (null) <br> <p>
invalid_clients is a string list of clients that are not
allowed on your server.  Some clients can't/don't share,
some clients are broken, etc.<br><br>

Example:  invalid_clients *floodster*,*mp3rage*,*rapigator*<br>

<p>
<b>invalid_nicks</b> <br>   
Type: string list<br>
Default : (null) <br> <p>
invalid_nicks is a list of invalid client nicks, ones which
you do not want on your network for some reason or another.
<br><br>

Example:  invalid_nicks joey2cool,*trade*<br>

<p>
<b>set_server_nicks</b> <br>   
Type: string list<br>
Default : (null) <br> <p>
set_server_nicks is a list of names of users who are allowed
access to raw 9998 and 9999.  The users must still be elite,
this adds another layer of security to restrict exactly who
is allowed access.  I suggest not doing wildcards in this
list.
<br><br>

Example:  set_server_nicks Khaytsus,ShadoeMynx<br><br>

<b>proxycheck</b> 0<br>   
Type: integer<br>
Default : 0 <br> <p>
If you want to scan for a proxy on incoming local users, set this to 1.  It
will IBL them if there is an open proxy at the IP they originate from.
Currently broken, do not use.

<b>eject_also_bans</b> 0<br>   
Type: integer<br>
Default : 0 <br> <p>
Should a eject of a client also result in a timed ban of the nick?
<br>The default value is 0 so no bans will occur 

<br><p>
<b>eject_ban_ttl</b> 1800<br>
Type: integer<br>
Default: 1800<br> <p>
If eject also bans - how long should the ttl of the nonsharing client be?
<br>The default value is 1800 seconds. 
<br><p>
<b>ibl_ttl</b> 0<br>
Type: integer<br>
Default: 0<br><p>
The Internal Ban List is used to control the connecting of excessive clients.
If a client is put on the IBL, then the ip of this user is quietly and
internally banned for ibl_ttl seconds.  Such situations include blocked
files, too few params for login, invalid client, nick, speed, port, password,
or compression level, reconnecting too fast, or server full.  A value of 0
disables this feature.  A reasonable value for this is 300 seconds.  Don't
make this excessively high or users will find it very difficult to get into
your server.
<br><p>
<b>search_max_cache_entries</b> 500<br>
Type: integer<br>
Default: 500<br> <p> 
To give the hub in a distributed network some relief and to speed up repeated 
searches an internal cache is maintained. How many searches should be cached? 
The default value is 500 searches. 
You can query the cache stats using /raw 10116  
The format of the output is:
Counter Rank Usage Starttime LastUsedTime SearchString 
<p>
<b><a name="eject_limit_libsize">eject_limit_libsize</a></b> 0<br>
Type: Integer<br>
Default: 0<br> <p>
set the min amount of Kilobytes a user has to share in order to be exempt 
from 'eject_when_full'. Any client that shares either eject_limit_files+1 files 
or 'eject_limit_libsize+1 Kilobytes will not be disconnected. 
<br> <p>

<b><a name="eject_limit_files">eject_limit_files</a></b> 0<br>
Type: Integer<br>
Default: 0<br><p>
set the min amount of files a user has to share in order to be exempt 
from 'eject_when_full'. Any client that shares either eject_limit_files+1 files 
or 'eject_limit_libsize+1 Kilobytes will not be disconnected. 
<br> <p>

<b>eject_grace_time</b> 600<br> <p>
If the eject_limits are on then a freshly started server may 
killban users because the load on such a server is so high that
some users are not able to get their files shared in time or
even may time out when sharing on a low bandwidth server.
The variable "eject_grace_time" is the time in seconds 
after which the eject_limits are checked right after the serverstart-
The default value is ten minutes ( 600 seconds ).
<br> <p>

<b>eject_nochannels</b> 1<br> <p>
Type: Integer<br>
Default: 1<br>
Normally eject when full will eject users who aren't
sharing enough regardless of if they are chatting.
eject_nochannels set to 1 only ejects users who 
are not in a channel and not sharing enough.
<br> <p>

<b>min_file_size</b> 0<br>
Type: integer<br>
Default: 0<br>
<p> 
Set the lower limit of filesize which a single file must at least have to be shared.
If the min_file_size is 0 then there is no checking on this parameter.
<br> <p>
<b>max_tags_per_minute</b> 2<br> <p>
Set the maximum number of certain tags per minute a client could issue to the server.
Some analysis showed that the tags 218, 219 and 700 were abusively used by 
some buggy clients. When the client has more than max_tags_per_minute tags 
the request is simply ignored.
<br> <p>
<b>max_searches_per_minute</b> 2<br>
<p>
Set the maximum number of searches (tag 200) a client is allowed to make during
his connection. Default value is 2. A value of 0 does not check the number of searches at all.
This limit is calculated by using: ( count200 - evaluate_search_abuse_after_tags ) / onlinetime 
So a value of 2 searches should be sufficient.
<br> <p>
<b>evaluate_search_abuse_after_secs</b> 120<br> <p>
After how many seconds should "max_searches_per_minute" be evaluated? This is to
prevent that a freshly connected user will be prosecuted because he is initally 
searching all of his incompletes.
<br> <p>
<b>evaluate_search_abuse_after_tags</b> 100<br>
Type: integer<br>
Default: 100<p>
After how many tags in total should max_searches_per_minute be evaluated? This is to
prevent that a freshly connected user will be prosecuted because he is initally
searching all of his incompletes. After 100 requests 
the counter starts counting.
<br> <p>
<b>break_mx_queue</b> 0<br> 
Type: integer<br>
Default: 0 <p>
Some buggy clients send a lot of privmsgs containing //WantQueue. If 
this value is set to 1 then these privmsgs will be blocked on the 
server this user is connected to.
To get a picture what a waste of bandwidth occures when not switching
this to 1 grep your opennap-ng logfile for "privmsg"opennap/opennap-ng/doc/.
It should display something like:<br>
privmsg: all 205: 43000 705596 Bytes - 205WQ: 39096 (90.9%) 431382 Bytes (61.1%)<br>
privmsg: all 205: 44000 720813 Bytes - 205WQ: 40030 (91.0%) 441662 Bytes (61.3%)<br> 
after only some hours of uptime. 205WQ is the count and the size of privmsgs
containing a queueing message.
<br> <p>
<b>notify_mod_abuse</b> 1<br> 
Type: integer<br>
Default: 1 <p>
When set to 0 the abuse of the tags mentioned above is not reported 
to the mod+ users on your system. 
<br> <p>
<b>notify_mod_abuse_frequency</b> 100<br> 
Type: integer<br>
Default: 100<br> <p>
When "notify_mod_abuse" is set to 1 then this following var 
reports the frequency of notifications which are sent. 
A notify-mod_abuse_frequency of 100 means that every 100th 
abuse per user is reported via notify_mods(). 
<br> <p>
<b>notify_user_abuse</b> 1<br> 
Type: integer<br>
Default: 0 <p> 
When set to 1 the abuse of the tags mentioned above is reported to
the user issueing the tag via a privmsg.
<br> <p>

<b>notify_user_abuse_frequency</b> 1000<br>
Type: integer<br>
Default: 1000<br> <p> 
When "notify_user_abuse" is set to 1 then this following var
reports the frequency of notifications which are sent.
A notify_user_abuse_frequency of 1000 means that every 1000th
abuse per user is reported via privmsg to the user.
<br> <p>
<b>no_mod_annoying</b> 0<br> 
Type: integer<br>
Default: 0<br> <p>
When set to 1 mod+ are exempt from the notification of tag abuse.
This only affects mod+ who are on a server where "notify_user_abuse"
is set to 1.
<br> <p>

<b>discipline_ignorers</b> 1<br>
Type: integer<br>
Default: 1<br> <p> 
<b>discipline_ignorers_ban_ttl</b> <br>
Type: integer<br>
Default: 2592000<br> <p> 
When a user ignores a mod+ this is annoying enough.
But when the mod killbans the user just to have the 
user relogging in with another nick this hits the spot 
multiplied by -1.
The vars "discipline_ignorers" and "discipline_ignorers_ban_ttl"
take some care of these cases. 
If you declare "discipline_ignorers 1" then the ignoring
user will be kicked. If you additionally specify
"discipline_ignorers_ban_ttl" >0 then these users will be banned
in addition to that for the ammount of seconds specified.
If you set the latter value to 0 then no banning will occur.
Both default values seem reasonable enough. ( 1 and 2592000 )
<br> <p>

<b>discipline_block</b> 0<br>
Type: integer<br>
Default: 0<br><p>
<b>discipline_block_ban_ttl</b> <br>
Type: integer<br>
Default: 259200<br> <p> 
<b>discipline_block_mod</b> <br>
Type: integer<br>
Default: 1<br> <p> 

When a user has a file blocked because of an offending
word that matches in the block file, ban them for
this configured time in seconds.
The vars "discipline_block" and "discipline_block_ban_ttl"
will configure if this behavior is done and for how long
to set the ban.  If you define "discipline_block 1"opennap/opennap-ng/doc/
the users who are sharing blocked files will be immediately
banned and killed.  The default value is to not kill and
ban users who have blocked files. Keep in mind that this 
behavior even would kick ELITE when they share suspect material
on the network. The mechanism of this is like follows
A user shares a file which matches one of the patterns in the 
block file. After that point every file he gets a flag "CRIMINAL" 
set which is queryable by "/raw 10050" or a "/msg operserv ..."opennap/opennap-ng/doc/.
A user with this flag set is handled like follows:
Every file he tries to share is logged via a mod+ notify.
If he finished sharing the user account is nuked and the
nickname is banned. Note that this even affects MOD+.
If you want to protect your MOD+ by setting
discipline_block_mod to 0 they won't get nuked but they 
still have the CRIMINAL flag set.
<br> <p>

<b>abuse_bans_ip</b> 1<br> 
Type: integer<br>
Default: 1<br> <p>
When set to 0 users who are banned are banned user!ip, when
set to 1 they are just banned with user!* and when set to 2
they are banned with *!ip.  This is to help prevent dynamic
IP users from repeatedly getting around abuse bans.<br><br>
<br> <p>

<b>browse_nag</b> 1<br> 
Type: integer<br>
Default: 1<br> <p>
When set to 1 users are nagged when their client issues an old
211 server browse request without at least trying the newer
640 direct browse command.
<br> <p>

<b>no_mod_annoying</b> 0<br> 
Type: integer<br>
Default: 0<br> <p>
When set to 1 mod+ are exempt from the notification of tag abuse.
This only affects mod+ who are on a server where "notify_user_abuse"
is set to 1.
<br> <p>

<b><a name="allow_share">allow_share</a></b><br>
Type: boolean<br>
Default: yes
<p>
Controls whether or not clients are allowed to share files via the server.
<p>

<b><a name="auto_link">auto_link</a></b><br>
Type: boolean<br>
Default: off
<p>
When set to <i>on</i>, opennap-ng will automatically attempt to link to all
servers listed in the <a href="#servers">servers</a> file when it starts up
for the first time.
<p>

<b><a name="auto_register">auto_register</a></b><br>
Type: boolean<br>
Default: off
<p>
When set to <i>on</i>, the server will automatically register a nickname the
first time it is used.  When <i>off</i>, nicknames will only be registered
when the client explicitly requests it.  Also see
<a href="#registered_only">registered_only</a>,
<a href="#register_interval">register_interval</a>.
<p>

<b><a name="client_queue_length">client_queue_length</a></b><br>
Type: integer<br>
Default: 102400
<p>
Sets the maximum number of bytes that can be queued for a client connection.
If this threshold is reached, it is assumed that the client is either dead,
or the network link can not sustain the level of output, and the server
automatically closes down the client connection.  This is necessary so that
dead clients don't consume all of the servers memory.
<p>
<b><a name="compression_level">compression_level</a></b><br>
Type: integer<br>
Default: 1
<p>
The zlib compression level to use when compressing server to server
connections.  0 means no compression, 1 is least effort, 9 is best
compression.  The higher the number, the more cpu it will consume.  Level 1
compresses text by about 50%, which is good enough for most applications.

<p><b><a name="eject_after">eject_after</a></b><br>
Type: integer<br>
Default: 120
<p>
Specifies the number of seconds after initial login to the server for which
the client is exempt from being killed for not sharing enough when the
server is full (see <a href="#eject_limit">eject_limit</a>).  This should
be large enough to allow a client to start sharing files before getting
killed.

<p><b><a name="eject_leeches">eject_leeches</a></b><br>
Type: integer<br>
Default: 0
<p>
When <a href="#eject_when_full">eject_when_full</a> is set, kill leeches
to allow another user to login, even if they are sharing over the
required amount of files.

<p>
<b><a name="eject_when_full">eject_when_full</a></b><br>
Type: boolean<br>
Default: off
<p>
If set to <i>on</i>, the server will disconnect the longest connected client
which is not sharing any files when the server is full (eg., when it has
reached <a href="#max_connections">max_connections</a> clients).  This
allows room to be made for those clients which are sharing files.  Also see
<a href="#eject_leeches">eject_leeches</a>, <a href="#eject_limit_libsize">eject_limit_libsize</a>,
and <a href="#eject_limit_files">eject_limit_files</a>
<p>
<b>Note:</b> <a href="#mods+">mods+</a> and <a href="#friend">Friends</a> are exempt and can always log in
even if they are sharing no files.

<b><a name="file_count_threshold">file_count_threshold</a></b><br>
Type: integer<br>
Default: 5000
<p>
When a indexed file search token (one word) contains more than this number
of matching files, the server will warn in its log output.  This gives the
ability to add this term to the list of <a href="#filter">filtered</a>
words.
<p>

<b><a name="flood_commands">flood_commands</a></b><br>
Type: integer<br>
Default: 0
<p>
This variable, along with <a href="#flood_time">flood_time</a>, allow for
server-side flood protection.  When set to a value greater than zero, the
server will not allow clients to issue more than this number of commands in
<a href="#flood_time">flood_time</a> seconds.  Any client attempting to send
commands faster than the allowed limit is throttled back.
<p>

<b><a name="flood_time">flood_time</a></b><br>
Type: integer<br>
Default: 100
<p>
See <a href="#flood_commands">flood_commands</a>.

<p><b><a name="ghost_kill">ghost_kill</a></b><br>
Type: boolean<br>
Default: on
<p>
When enabled, opennap-ng will automatically kill an existing connection if the
same user logs in from the same IP address.

<p><b><a name="ghost_kill">ghost_kill_timer</a></b><br>
Type: int<br>
Default: 450
<p>
If a user logging into the local server which has ghost_kill turned on has
a ghost on the server/network, if that ghost has been on more than ghost_kill_timer
seconds, the old user is ghosted and the new user can login.  Otherwise
user is given a Connecting too fast (wait N seconds) error and disconnected.

<p><b><a name="index_ignore_suffix">index_ignore_suffix</a></b><br>
<p>
Type: boolean<br>
Default: true
<p>
Controls whether or not the filename extensions of shared files are included
in the searchable index.
<p>
Also see <a href="#index_path_depth">index_path_depth</a>.

<p><b><a name="index_path_depth">index_path_depth</a></b><br>
Type: integer<br>
Default: 2
<p>
Controls how many levels of directory are included when adding shared files
to the searchable index.  Often times the leading parts of the path are
completely useless for searching (eg., C:\Program Files\My Music\Rock\)
and just consumes a lot of memory.  This variable counts from the <b>end</b>
of the path backwards, so the higher the value, the more of the beginning of
the path it will include.
<p>
Also see <a href="#index_ignore_suffix">index_ignore_suffix</a>.

<p><b><a name="irc_channels">irc_channels</a></b><br>
Type: boolean<br>
Default: on
<p>
When set, opennap-ng requires all channel names to begin with
# or &amp;.
<p>
<b><a name="listen_addr">listen_addr</a></b><br>
Type: string<br>
Default: 0.0.0.0
<p>
By default, the server will listen on all interfaces on the system.  You can
force it to listen only on a single interface by specifying the ip address
of the interface in this option.
<p>
<b><a name="log_mode">log_mode</a></b><br>
Type: boolean<br>
Default: off
<p>
When set to <b>on</b>, opennap-ng will log changes in user levels to a file.
<p><b><a name="log_level">log_level</a></b><br>
Type: Bitflag<br>
Default: 1423 (Server, Client, Login, Files, Error, Security, Stats)
<p>
This is a bitflag word to determine what is is that you want logged.  That said,
what that means is you look at the following list, and add together the values
of the log levels you want to see in your server log (or output) and in the &LOG
channel.<br>

<pre>
Server  :    1
Client  :    2
Login   :    4
Files   :    8
Share   :   16
Search  :   32
Debug   :   64
Error   :  128
Security:  256
Channel :  512
Stats   : 1024</pre>

If you want Server (1), Client (2), and Files (8), you set log_level to 1+2+8 = 11
Another example, Server, Client, Files, Share, Debug = 1 + 2 + 8 + 32 + 64 = 107
<p>
<b><a name="login_interval">login_interval</a></b><br>
Type: integer<br>
Default: 0
<p>
Specifies how often (in seconds) clients from the same IP address are
allowed to connect to the server.  This allows you to ignore clients which
are reconnecting too fast.  A value of <i>0</i> disables the check.
Also see <a href="#register_interval">register_interval</a>.
<p>
<b><a name="login_timeout">login_timeout</a></b><br>
Type: integer<br>
Default: 60
<p>
If a client has not completed the login process after this number of
seconds, it will be disconnected.  This is to prevent malicious parties from
trying to open up many sockets to the server.
<p>
<b><a name="max_browse_result">max_browse_result</a></b><br>
Type: integer<br>
Default: 500
<p>
Because of the limit imposed by <a
href="#client_queue_length">client_queue_length</a>, the number of files
returned by a browse command is limited to this number.  If this is too
large, clients will be disconnected when they browse a user with many files.
There is also a consideration of bandwidth, a high browse limit imposes a
large amount of uplink bandwidth.  Mod+ are exempt from this limit, however
they are still limited by the <a href="#max_shared">max_shared</a> value.
<p>
<b><a name="max_channel_length">max_channel_length</a></b><br>
Type: integer<br>
Default: 32
<p>
Specifies the max number of characters allowed in a channel name.
<p>
<b><a name="max_client_string">max_client_string</a></b><br>
Type: integer<br>
Default: 32
<p>
Specifies the max number of characters allowed in the client version string.
<p>
<b><a name="max_clones">max_clones</a></b><br>
Type: integer<br>
Default: 0
<p>
When set to a value greater than 0, the server will only allow this many
connections from the same ip address.  Also see
<a href="#login_interval">login_interval</a>.
<p>
<b><a name="max_command_length">max_command_length</a></b><br>
Type: integer<br>
Default: 2048
<p>
When set to a value greater than 0, the server will disconnect any client
that sends a command longer than this value.  Clients that trigger this are
either attempting to flood the server or are out of sync.
<p>

<b><a name="max_connections">max_connections</a></b><br>
Type: integer<br>
Default: 0
<p>
When set to a value greater than 0, the server will only allow this many
clients to log into the server.
<p>

<b><a name="max_new_users_per_minute">max_new_users_per_minute</a></b><br>
Type: integer<br>
Default: 0
<p>
Maximum number of new users which are able to login per minute
right after a serverstart. This is to avoid splits and timeouts
due to the fact that 2000 users who want to connect to the
freshly advertised server simultaneously produce a pretty nice
bandwidth peak. Default value is 0. If set to 0 then no checking
on the user/time ratio takes place. A good value for DSL-lines 
is 90 users per minute.
<p>

<b><a name="max_hotlist">max_hotlist</a></b><br>
Type: integer<br>
Default: 32
<p>
When set to a value greater than 0, the server will only allow each user to
have this many entries on their hotlist.
<p>
<b><a name="max_ignore">max_ignore</a></b><br>
Type: integer<br>
Default: 32
<p>
When set to a value greater than 0, this server will only allow each user to
have this many entries on their ignore list.
<p>
<b><a name="max_nick_length">max_nick_length</a></b><br>
Type: integer<br>
Default: 19
<p>
If set to a value greater than 0, this specifies the max number of
characters allowed in a nickname.
<p>
<b><a name="max_reason">max_reason</a></b><br>
Type: integer<br>
Default: 96
<p>
If set to a value greater than 0, this specifies the max number of
characters allowed in the "reason" strings for such commands as <i>ban, kick
and kill</i>.
<p>
<b><a name="max_results">max_results</a></b><br>
Type: integer<br>
Default: 100
<p>
If set to a value greater than 0, this specifies the max number of search
results that are returned to a client.
<p>
<b><a name="max_searches">max_searches</a></b><br>
Type: integer<br>
Default: 3
<p>
Specifies the maximum number of pending searches a user is allowed to have.
Once this threshold is reached, no more searches can be issued until one of
the others has completed.
<p>
<b><a name="max_shared">max_shared</a></b><br>
Type: integer<br>
Default: 5000
<p>
If set to a value greater than 0, this specifies the max number of files
that any client may share.  This also affects the maximum number of browse
results for mod+ as they are exempt from the normal <a href="#max_browse_result">max_browse_result</a>
<p>
<b><a name="max_time_delta">max_time_delta</a></b><br>
Type: integer<br>
Default: 90
<p>
Specifies the maximum number of seconds of difference in clock time between
two servers in order for them to be able to link.  Note that if this value
is set too large, users can gain ops in channels even if they were not the
first user to join the channel.
<p>
A value of 0 will turn off this check completely.
<p>
<b><a name="max_topic">max_topic</a></b><br>
Type: integer<br>
Default: 64
<p>
If set to a value greater than 0, this specifies the max number of
characters allowed in a channel topic.

<p><b><a name="max_user_channels">max_user_channels</a></b><br>
Type: integer<br>
Default: 5
<p>
If set to a value greater than 0, this specifies the max number of channels
a user is allowed to join.

<p><b><a name="nick_expire">nick_expire</a></b><br>
Type: integer<br>
Default: 2678400 <i>(31 days)</i>
<p>
Specifies the time in seconds of after which unused accounts are expired and
returned to the pool of available nicknames.
<p>
<b><a name="ping_interval">ping_interval</a></b></br>
Type: integer</br>
Default: 600
<p>
Specifies the interval (in seconds) of how often to <a
href="#sping">sping</a> peer (linked) servers.
<p>
<b><a name="register_interval">register_interval</a></b><br>
Type: integer<br>
Default: 0
<p>
Specifices how often (in seconds) clients from the same IP address are
allowed to register new nicknames.  This can be used in conjunction with
<a href="#auto_register">auto_register</a> to block web/clone clients which
attempt to log in with random nicknames.

<p><b><a name="registered_only">registered_only</a></b><br>
Type: boolean<br>
Default: off
<p>
When set to <i>on</i>, the server only allows logins from registered
clients.  Also see <a href="#auto_register">auto_register</a>,
<a href="#register_interval">register_interval</a>.

<p><b><a name="remote_browse">remote_browse</a></b><br>
Type: boolean<br>
Default: on
<p>
This variable controls whether or not the server supports remote browsing
(where the client being browsed is not on the same server).  In large
networks, remote browsing can account for significant cross server traffic,
increasing lag.  Lopster or TekNap support´s for clients to directly browse
eachother outside of the servers, which is the recommended approach.
<p>
Napigator support - you should only need to set stat_server_user and
stat_server_pass at the minimum.  If you have used your correct DNS
name for server_name above, then you don't need to use any of the
report_* variables. If opennap-ng has trouble detecting the proper values
to send to napigator, then you should set the report_* variables
appropriately.      
<br>

<p><b><a name="report_name">report_ip</a></b><br>
Type: string<br>
Default: value of <a href="#server_name">server_name</a>
<p>
Sets the IP address this server listens on to be reported to
<a href="http://www.napigator.com">Napigator</a>

<p><b><a name="report_name">report_name</a></b><br>
Type: string<br>
Default: value of <a href="#server_name">server_name</a>
<p>
Sets the name of the server reported to <a href="http://www.napigator.com">
Napigator</a>

<p><b><a name="report_name">report_port</a></b><br>
Type: string<br>
Default: value of <a href="#server_ports">server_ports</a>
<p>
Sets the TCP port this server listens on to be reported to
<a href="http://www.napigator.com">Napigator</a>

<p><b><a name="restrict_registration">restrict_registration</a></b><br>
Type: boolean<br>
Default: off
<p>
If set, disallow the automatic registration of new nicknames by clients as
they log in for the first time.  The only way to create new nicknames
(accounts) is then to use the administrator commands to register, or by
editing the <a href="#users">users</a> file directly (when the server is
<b>not</b> running).  This option is typically used with the
<a href="#registered_only">registered_only</a> option to run a private,
access-controlled server where users need accounts before they can log in.

<p><b><a name="search_timeout">search_timeout</a></b><br>
Type: integer<br>
Default: 180
<p>
When servers are linked, searches will be timed out if no response has been
received after this many seconds.  This forces the server to send the final
ack to the client.

<p><b><a name="server_alias">server_alias</a></b><br>
Type: string<br>
Default: none
<p>
Allows you to specify an alternate name by which the server refers to
itself.  This is useful for connecting a "hidden" hub (routing-only) server,
or if you just want to use a shortcut for the full dns name.

<p><b><a name="server_name">server_name</a></b><br>
Type: string<br>
Default: <i>depends on hostname</I>
<p>
Specifies the server's DNS name.

<p><b><a name="server_ports">server_ports</a></b><br>
Default: 8888<br>
Type: list
<p>
This option specifies a list of TCP ports which the server should listen on
for client connections.  Each port number should be separated by whitespace.

<p><b><a name="server_queue_length">server_queue_length</a></b><br>
Type: integer<br>
Default: 1024000
<p>
Specifies the maximum number of bytes that can be queued for a server
connection before it is considered dead.

<p><b><a name="stat_click">stat_click</a></b><br>
Type: integer<br>
Default: 60
<p>
Specifies how often (in seconds) the server should send updates about server
statistics (users/files/gigs) to the clients.

<p><b><a name="stats_port">stats_port</a></b><br>
Type: integer<br>
Default: 8889
<p>
Specifies the TCP port on which the server should listen to reports stats.
Typically used by <a href="http://www.napigator.com">Napigator</a>.  If this
port is set to <i>-1</i>, the server will not listen for stats reporting at
all.

<p><b><a name="stat_server">stat_server</a></b><br>
Type: string<br>
Default: stats.napigator.com
<p>
Sets the DNS/IP address of the <a
href="http://www.napigator.com">Napigator</a> server to report stats.
<p>
Also see
<a href="#report_name">report_name</a>,
<a href="#report_ip">report_ip</a>,
<a href="#report_port">report_port</a>,
<a href="#stat_server_port">stat_server_port</a>,
<a href="#stat_server_user">stat_server_user</a>,
<a href="#stat_server_pass">stat_server_pass</a>.

<p><b><a name="stat_server_pass">stat_server_pass</a></b><br>
Type: string<br>
Default: none
<p>
Sets the password for your <a href="http://www.napigator.com">napigator</a>
account to list live server stats.

<p><b><a name="stat_server_user">stat_server_user</a></b><br>
Type: string<br>
Default: none
<p>
Sets the username for your <a href="http://www.napigator.com">napigator</a>
account to list live server stats.

<p><b><a name="strict_channels">strict_channels</a></b><br>
Type: boolean<br>
Default: off
<p>
When set to <i>on</i>, the server will only allow privileged users to create
new channels.

<p><b><a name="user_db_interval">user_db_interval</a></b><br>
Type: integer<br>
Default: 1800
<p>
Specifies the interval in seconds of how often the server should write out
its database files to disk.  This is important in case the server crashes
prematurely, so that data loss is minimal.

<p><b><a name="usermode_var">usermode</a></b><br>
Type: string<br>
Default: ALL
<p>
Sets the default <a href="#usermode">usermode</a> for <a
href="#mods+">mods+</a> users.

<p><b><a name="warn_time_delta">warn_time_delta</a></b><br>
Type: integer<br>
Default: 30
<p>
If the clock on a remote server is more than this many seconds out of sync,
opennap-ng will print a warning message. Also see <a href="#max_time_delta">
max_time_delta</a>.
<p>
A value of 0 turns off the warning completely.

<p><b><a name="who_was_time">who_was_time</a></b><br>
Type: integer<br>
Default: 300
<p>
Specifies the number of seconds after a user logs out that information on
the client's ip address and server is kept in cache, so that mods+ may
perform a <a href="#whowas">whowas</a> command. <b>Note:</b> this only
controls how often the cache is purged, so some nicks may appear to be older
than this amount.

<hr>

<h2>UNIX Specific Configuration Options</h2>

<b><a name="connection_hard_limit">connection_hard_limit</a></b><br>
Type: integer<br>
Default: <i>depends on OS</i>
<p>
Sets the maximum number of file descriptors available to the server process.
Generally this is used to increase the default number availble.  Note that
in order to increase the default maximum, the server needs to be run as
<i>root</i> (OpenNap-NG will drop privileges and run as the uid/gid specified
by the <i>configure</I> arguments).
<p>

<b><a name="lock_memory">lock_memory</a></b><br>
Type: boolean<br>
Default: off
<p>
On supported systems, this will cause the server to lock all of its memory
pages into real memory, thus avoiding swapping to disk.
<p>
<b><a name="max_data_size">max_data_size</a></b><br>
Type: integer<br>
Default: <i>varies depending on OS</i>
<p>
Sets the maximum amount of memory the process may consume.  Also see <a
href="#max_rss_size">max_rss_size</a>.
<p>
<b><a name="max_rss_size">max_rss_size</a></b><br>
Type: integer<br>
Default: <i>varies depending on OS</i>
<p>
Sets the maxiumum amount of real memory a process is allowed to consume.
Any excess will be swapped to disk.  Also see <a
href="#max_data_size">max_data_size</a>.
<p>

<p>
See the <tt>sample.config</tt> file as a basis to start your own
configuration.

<hr>
<h3><a name="channels">Channels</a></h3>
The <tt>channels</tt> file specifies all predefined channels on the server.
Each line in this file should be of the form:
<pre>
	&lt;channel> &lt;limit> &lt;level> "&lt;topic>"
</pre>
where <i>channel</i> is the channel name, <i>limit</i> is the maximum number
of users allowed in the channel (0 for no limit), <i>level</i> is the
minimum user level required to enter the channel and <i>topic</i> is the
default topic for the channel.
<p>
<b>NOTE:</b> typically you edit this file once before starting your server.
You should <b>never</b> edit it while the server is running or your changes
will be lost.  The server always writes out its state when it shuts down,
because new information about the channel may have been set.  If you want to
edit it by hand, you should first shut down your server.

<p>
See the <tt>sample.channels</tt> file as a basis to start your own
configuration.

<hr>
<h3><a name="filter">Filter</a></h3>
This file allows you specify a list of words that should not be indexed when
clients share files.  This is most commonly used to weed out very common
words such as `mp3' or `the' to save on server resources, since it is
expected that none of these words will be very useful when searching.  Note
that the file is still indexed, you just can't use these particular words
to find that file.
<p>
In certain cases, a file may contain no valid words and thus won't be able
to be found via the search mechanism.  However, the file will show up when
browsing the client's filelist, and therefore can still be downloaded.

<p>
See the <tt>sample.filter</tt> file as a basis to start your own
configuration.

<hr>
<h3><a name="motd">MOTD</a></h3>     
Welcome to the experiental OpenNAP-NG server. This server is still in *ALPHA*
release.
<p>  
This file can contain other interesting data if the writer were not so
lazy.  :-)
<p>  
Juni 06, 2002 

<p>
See the <tt>sample.motd</tt> file as a basis to start your own
configuration.

<hr> 
<h3><a name="servers">Servers</a></h3>
The <tt>servers</tt> file contains a list of servers which are allowed to
link.  Each line in this file is of the form:
<pre>
	&lt;server_name> &lt;remote_pass> &lt;local_pass> &lt;port> [alias]
</pre>
where <i>server_name</i> is the DNS name of the remote server (the remote
server should have its <a href="#server_name">server_name</a> set to this
value), <i>remote_pass</i> is the password expected from the remote server
to authenticate (prove its identity), and <i>local_pass</i> is the password
your server uses to authenticate to the remote server.
<p>
<i>port</i> is the TCP port on the server to connect to.
<p>
<i>alias</i> is an optional string which will be used to refer to this
server instead of its DNS name.  This is useful for defining hub servers
where you might not want the DNS name to be revealed to users, or you want
to use a different name instead of the ip address (if you don't have a
reverse DNS record).
<p>
<b>Note:</b> lines that begin with a pound sign (#) or any space character
(tab, etc.) are ignored.

<p>
See the <tt>sample.server</tt> file as a basis to start your own
configuration.

<hr>
<h3><a name="user">User</a></h3>     
Lines starting with a hash (#) are comments and are ignored.  Each line of
the database should be of the format:
<p>
nickname password email level created lastseen
<p>
 <i>nickname</i>      the nickname that is registered<br> 
 <i>password</i>      the password for this nickname, created with `mkpass'<br> 
 <i>email</i>         the email address for this user<br> 
 <i>level</i>         the default user level of this user.  should be one of:
                      leech, user, moderator, admin, elite<br> 
 <i>created</i>       the time at which the account was registered (as measured by
                      the time(2) system call<br> 
 <i>lastseen</i>      the time at which the user last logged in/out the server (as
                      measured by the time(2) system call<br>
<p>
 <b>Example:</b><p>
 <tt>lewser 1,N6BeTWZ4,fWJx95pWVcd2wTJk3ZCFBw blah@email.com Leech 0 0<br>
 poweruser 1,3aYmWBkH,o4BAAYyOD61bc28Eef8+5w my@address.com Elite 0 0</tt>   
</p>

<p>
See the <tt>sample.user</tt> file as a basis to start your own
configuration.

<hr>
<H2><a name="admin">Administration</a></H2>

This section describes how to administer the OpenNap-NG server through the use
of a connected client.  It is assumed by the time you get here that you have
set up at least one Elite level (server owner) account on your server (this
is done by the setup program if you installed it that way).  The first thing
you want to do is log into your server with this account.  When you log in,
you should see a message from the server on your client, something like:

<pre>
	<i>server_name</i> set you to level Elite (4).
</pre>

where <i>server_name</i> is the name of your server.  This message will let
you know that you have fill privilege to access administrative commands on
this server.
<p>
Clients such as <a href="http://lopster.sourceforge.net">Lopster</a> or 
<a href="http://www.teknap.org">TekNap</a> already have all
of the OpenNap-NG extensions built into it. Others, such as the official
Napster client or WinMX do not (it was not inteded to be used by administrators).
If you client is missing functions to directly access these administration
commands, not to worry, OpenNap-NG has a way of getting around this. OpenNap-NG
provides to pseudo-users, <I>ChanServ</I> for channel related commands, and
<I>OperServ</I> for server related commands.  For both of these, you can
access their functionality by sending a privmsg (instant) message to either
of these users (in most clients this will be either <tt>/msg</tt> <i>user</i>
or <tt>/tell</tt> <i>user</i>).

<H3><a name="chanserv">ChanServ</a></h3>

You can administer chat channels either by using your client's built in
functions, or by sending private (instant) messages to the user
<i>ChanServ</i>.  Note that most all of the following that actually affect
the channel require the user issuing the command to be a channel operator.

<h4>ban</h4>

<tt>/msg chanserv ban</tt> <i>#channel</i> <i>nick</i> <i>["reason"]</i>
<p>
Places a ban on channel such that <i>nick</i> is prevented from joining.
You can optionally give a <i>reason</i> for the ban that will be displayed
to the user (<b>Note</b>: if you specify the reason, it <b>MUST</b> be
quoted with double-quotes (") or else the server will only show the first
word of the reason).

<h4>banclear</h4>

<tt>/msg chanserv banclear</tt> <i>#channel</i>
<p>
Removes all bans from the channel.

<h4>banlist</h4>

<tt>/msg chanserv banlist</tt> <i>#channel</i>
<p>
Displays the list of bans for the channel.  <b>Note:</b> this does not work
for the official Windows Napster client since it doesn't have support for
displaying it.

<h4>clear</h4>

<tt>/msg chanserv clear</tt> <i>#channel</i>
<p>
Kicks all users in the channel out of the channel, only leaving yourself.

<h4>deop</h4>

<tt>/msg chanserv deop</tt> <i>#channel</i> <i>nick</i>
<p>
Removes user <i>nick</i> as a channel operator and makes him/her a normal
channel user.

<h4>help</h4>
<tt>/msg chanserv help</tt>
<p>
Displays a summary of all available commands.

<h4>invite</h4>
<tt>/msg chanserv invite</tt> <i>#channel</i> <i>nick</i>
<p>
Send an invitation to user <i>nick</i> allowing them to join a channel which
is set +INVITE.

<h4>kick</h4>
<tt>/msg chanserv kick</tt> <i>#channel</i> <i>nick</i> <i>["reason"]</i>
<p>
Kick user <i>nick</i> out of the channel.  A <i>reason</i> can optionally be
given.  <b>Note:</b> if <i>reason</i> is given, it <b>MUST</b> be quoted
with double-quotes (") or else the server will only display the first word.

<h4>level</h4>
<tt>/msg chanserv level</tt> <i>#channel [level]</i>
<p>
Displays/sets the minimum required <a href="#level">user level</a> to be
allowed to join a channel.
<p>

<h4>limit</h4>
<tt>/msg chanserv limit</tt> <i>#channel [numusers]</i>
<p>
Displays/sets the maximum number of users allowed to join a channel.
<p>

<h4>mode</h4>
<tt>/msg chanserv mode</tt> <i>#channel</i> <i>[mode [mode ...]]</i>
<p>
Displays/sets the channel mode.  If no modes are given, it returns what the
current channel mode is.  Acceptable modes are:
<ul>
<li>TOPIC - allows any user to change the channel topic (normally only
channel operators are allowed)
<li>MODERATED - only channel operators and those who have been given channel
<i>voice</I> can speak
<li>INVITE - users must be invited before allowed to join
<li>PRIVATE - makes the channel not show up in the server's channel list
<li>REGISTERED - (<a href="#mods+">mods+ only</a>) makes the channel persist
even when no users are present in the channel, and disallows <a
href="#chanop">channel operator</a> to the first user that joins it.
</ul>
To <i>set</i> a channel mode, prefix it with a plus-sign (+).  To
<I>unset</i> a channel mode, prefix it with a minus-sign (-).  You can
specify however many different modes on the same command as you like.

<h4>muzzle</h4>
<tt>/msg chanserv muzzle</tt> <i>#channel</i> <i>nick</i>
<p>
Prevent user <i>nick</i> from being able to send messages to the channel.

<h4>op</h4>
<tt>/msg chanserv op</tt> <i>#channel</i> <i>[nick [nick ...]]</i>
<p>
If no nicknames are given, it returns a list of the current channel
operators.  If given one or more nicknames, each user will be given channel
operator status (and thus the ability to execute any of the other channel
admin commands).

<h4>topic</h4>
<tt>/msg chanserv topic</tt> <i>#channel</i> <i>[topic]</i>
<p>
Display/set the channel topic.

<h4>unban</h4>
<tt>/msg chanserv unban</tt> <i>#channel</i> <i>nick</i>
<p>
Remove channel ban against <i>nick</i>, allowing him/her to join the channel
again.

<h4>unmuzzle</h4>
<tt>/msg chanserv unmuzzle</tt> <i>#channel</i> <i>nick</i>
<p>
Allow a previously muzzled user to send messages to the channel.

<h4>unvoice</h4>
<tt>/msg chanserv unvoice</tt> <i>#channel</i> <i>nick</i>
<p>
Remove the ability to speak in a +MODERATED channel.

<h4>voice</h4>
<tt>/msg chanserv voice</tt> <i>#channel</i> <i>nick</i>
<p>
Give the ability for a user to speak in a +MODERATED channel

<h4>wallop</h4>
<tt>/msg chanserv wallop</tt> <i>#channel</i> <i>text</i>
<p>
Send a message to all channel operators on the channel (that is not seen by
other users in the channel).

<h3><a name="#nickserv">NickServ</a></h3>

<i>NickServ</i> is a pseudo-user which provides access to registered user
accounts.   You can /msg (or /tell) it with the following commands.

<h4><a name="ghostkill">ghost</a></h4>
<tt>/msg nickserv ghost</tt> <i>user password</i>
<p>
This command allows you to kill a <a href="#ghost">ghost</a> which is
holding your nickame so that you can log in again.  <i>user</i> is the nick
which is ghosting, and <i>password</i> is the password for that account.

<h4><a name="register">register</a></h4>
<tt>/msg nickserv register</tt> <i>password</i>
<p>
Allows a user to register a nickname that has not been previously
registered, such that no other user may use the nickname without the
corresponding password.
<h4>usermode</h4>
<tt>/msg nickserv usermode</tt> <i>[flags]</i>
<p>
See <a href="#usermode">usermode</a>.
<p>
<h3><a name="operserv">OperServ</a></h3>

<I>OperServ</i> is a pseudo-user which allows <a href="#mods+">mods+</a>
level users to execute server administration command.  This is primarily
intended for those clients which do not have built in support for these
commands, but there is no restriction on its use.

<h4><a name="cloak">cloak</a></h4>
<tt>/msg operserv cloak</tt>
<p>
Toggles invisibility to normal users.  When cloaked, normal users do not see
your real nickname when you perform actions such as kill, ban, etc.
Instead, it will display <i>Operator</i>.  Other <a href="#mods+">mods+</a>
users still see the real nickname.

<h4>config</h4>
<tt>/msg operserv config</tt> <I>var [value]</i>
<p>
Display/set a server configuration variable.  When <i>value</i> is missing,
OpenNap-NG displays the value of <i>var</i>.  If <i>value</i> is specified,
it sets the <a href="#config">configuration variable</a>.

<h4>connect</h4>
<tt>/msg operserv connect</tt> <i>server [remote_server]</i>
<p>
Links the server running on <i>server</i>.  If <i>remote_server</i> is
specified, it tries to make a connection from <i>remote_server</i> to
<i>server</i> instead of from the local server.

<h4>disconnect</h4>
<tt>/msg operserv connect</tt> <i>server</i>
<p>
De-links a server from the cluster.

<h4>killserver</h4>
<tt>/msg operserv killserver</tt> <i>server</i>
<p>
Causes the specified server to shut down (terminates the OpenNap-NG process).

<h4>links</h4>
<tt>/msg operserv links</tt>
<p>
Display a list of all linked servers.

<h4>list_server</h4>
<tt>/msg operserv list_server</tt>
<p>
Display the servers file, the list of known servers.

<h4>add_server</h4>
<tt>/msg operserv add_server &lt;hostname> &lt;their_pass> &lt;my_pass> &lt;port> [alias]</tt>
<p>
Adds a temporary server to the servers list

<h4>reconfig</h4>
<tt>/msg operserv reconfig</tt> <I>var</i>
<p>
Resets the <a href="#config">configuration</a> variable <i>var</i> to its
default value.

<h4>rehash</h4>
<tt>/msg operserv rehash</tt> <i>[server]</i>
<p>
Causes the server to reload its configuration files.

<h4>server</h4>
<tt>/msg operserv server</tt> <i>nick</i>
<p>
Displays which server a particular user is logged in through.

<h4>stats</h4>
<tt>/msg operserv stats</tt> <I>server</i>
<p>
Displays stats about the server (uptime, bytes send/recv'd, etc).

<h4><a name=userflags">userflags</a></h4>
<tt>/msg operserv userflags </tt><i>Nick FLAG</i></tt> 
<p>
change userflags of a user. Flags can be Friend or None.

<h4><a name="usermode">usermode</a></h4>
<tt>/msg operserv usermode</tt> <i>[mode [mode ...]]</i>
<p>
Toggles the various server messages.  Each message the server sends to <a
href="#mods+">mods+</a> is given a type so that if you don't want to see a
particular type of message, you can simply turn it off and still see the
other messages.
<ul>
<li>ABUSE - WinMX (tag) abuse notifications
<li>ERROR - error messsages
<li>BAN - server-wide ban messages
<li>CHANGE - messages about user info being modified (password, etc).
<li>KILL - notifications when users are killed
<li>LEVEL - notifications when a user's level is changed
<li>SERVER - server link messages
<li>MUZZLE - notifications about users being muzzled
<li>PORT - notifications about user's data ports being changed
<li>WALLOP - messages from other <a href="#mods+">mods+</a>
<li>CLOAK - messages about <a href="#mods+">mods+</a> being <a
href="#cloak">cloaked</a>
<li>FLOOD - server flood protection messages
<li>PING - server ping messages (for lag detection)
<li>MSG - private (instant) messages
<li>WHOIS - whois notifications
</ul>
To stop messages of a particular type, simply prefix the mode with a
minus-sign (-).  If you wish to only see a particular subset of messages,
specify the ones you want with no prefix.  You can also use the keyword
<tt>ALL</tt> in conjunction with <i>-&lt;MODE&gt;</i> if you want "all
but..."

<h4><a name="whowas">whowas</a></h4>
<tt>/msg operserv whowas</tt> <i>nick</i>
<p>
Displays information about a user that has recently logged out.  Information
is kept cached for <a href="#who_was_time">who_was_time</a> seconds.

<hr>
<h2><a name="help">Getting Help</a></h2>
If after reading this manual thoroughly you are not able to get something
working, there are a number of options available for getting help.
<h3><a name="web">Web Forums</a></h3>
<ul>
<li>
<a href="http://opennap-ng.org/forum.php">Web Forum</a>

<h3><a name="lists">Mailing Lists</a></h3>
<ul>
<li><a
href="http://opennap-ng.org/forum.php">Opennap-NG Forum</a>
is a forum for asking Opennap-NG related development or admin questions.
<li><a
href="http://opennap-ng.org/cgi-bin/trac.cgi/timeline">Opennap-NG Timeline</a>
development details of the opennap-ng software.
</ul>

<hr>
<h2><a name="glossary">Glossary</a></h2>

<h3><A name="admin">Admin</a></h3>

An <i>admin</i> is a special <a href="#level">user level</a> which allows you
to execute all of the <a href="#mod">moderator</a> functions, plus the
following:
<ul>
<li>link a server
<li>disconnect a server
<li>give <a href="#mod">moderator</a> status to other users
</ul>

<h3><a name="chanop">Channel Operator</a></h3>

A channel operator, also known as a <i>chanop</i> or just <i>op</i>, is a
user that is allowed to administer a chat channel.  See <a
href="#chanserv">ChanServ</a> for a list of available commands.  Channel
operators have no special privileges outside of the channel they are opped
in.
<p>
Channel operator status is given either when a user is the first user to
join a chat channel, or another channel operator makes a user a channel
operator using the <tt>op</tt> command.  All channel operators are
equivalent, meaning that if you op a user, they can immediately deop you (remove
your channel operator privilege).
<p>
Note that being a channel operator is not a <a href="#level">user level</a>.
Most channel operators are only normal <a href="#user">users</a>.

<h3><a name="svn">SVN</a></h3>
 
To get the latest source by SVN try this:
<ul>
 <tt>svn co http://svn.opennap-ng.org/repos/trunk opennap-ng</tt>
</ul>
 To update, cd into the opennap-ng directory and type..
<ul>
<li>
  svn update
</ul> 

<h3><a name="elite">Elite</a></h3>

An <i>elite</i> user is generally a server owner (the person who actually
runs the OpenNap-NG software on their computer).  They can basically do
whatever they want.  Don't step on their toes, these are the people
providing you the service!

<h3><a name="friend">Friend</a></h3>  
<p>
A <i>Friend User</i> is a user that can join the network at any time. So 
be very careful with this status. With <tt>/msg operserv userflags USERNAME Friend</tt>
you can give this status to any user. Important: For the <i>Friend Flag</i> the user
must be a registered user at your network. 

<h3><a name="ghost">Ghost</a></h3>
A <i>ghost</I> is when a client gets disconnected from the server but the
server doesn't realize it so it thinks you are still logged in.  When this
happens, the server will kill your ghost if you come back from the same ip
address.  However, if you are using a dialup this will likely not be the
case.  You can use the <a href="#ghostkill">ghost</a> command via <a
href="#nickserv">NickServ</a> to kill your ghost.

<h3><a name="leech">Leech</a></h3>

<i>Leech</i> is a term for someone who is a freeloader.  This <a
href="#level">user level</a> is given to those users which are misbehaving
in some way.  When you are <i>leeched</i>, you can not do the following
things:
<ul>
<li>join chat channels
<li>send messages to chat channels
</ul>

<h3><a name="mod">Moderator</a></h3>

A <i>moderator</I>, or "mod" for short, has the ability to execute some of
the administrative functions on the server.  A moderator can:
<ul>
<li><i>kill</i> - disconnect other users from the server
<li><i>muzzle</i> - prevent other users from sending messages to chat
channels or joining channels
<li><i>ban</i> - prevent users from logging into the server
<li><i>change data port</i> - reset the data port your client listens on for
file transfers
<li><i>announce</i> - send a message to all users
<li><i>wallop</i> - send a message to all <a href="#mods+">mods+</a>
<li><i>setuserlevel</i> - change a user's <a href="#level">level</a>
</ul>
In addition, moderators have the ability to execute all <a
href="#chanserv">ChanServ</a> functions to adminster chat channels.

<h3><a name="mods+">Mods+</a></h3>

All users which have <a href="#level">level</a> of
<a href="#mod">Moderator</a> or higher.

<h3><a name="motd-gloss">Motd</a></h3>
<p>
<i>Message Of The Day</i>.  This is the text the server sends to your client
when you first log in.

<h3>(Server) Split</h3>

Term used to describe when two linked servers become disconnected from one
another (you can generally tell when this happens because if you are in a
chat channel you will see a bunch of users leave at the same time).

<h3><a name="sping">Sping</a></h3>

A term meaning <i>server ping</i>, or how long it takes a server to see your
data and respond.

<h3><a name="user">User</a></h3>

A <i>user</i> is a plain-old-joe.  This is what the vast majority of users
are.  It gives you access to create channels and chat.

<h3><a name="level">(User) Level</a></h3>

Each user on a OpenNap-NG server has a <i>level</i> associated with them that
tells the server which commands it may execute.  When you first log into a
server, you start out at level <a href="#user">User</a>.  In addition, the
following user levels are also defined:
<ul>
<li><a href="#elite">Elite</a>
<li><a href="#admin">Admin</a>
<li><a href="#mod">Moderator</a>
<li><a href="#leech">Leech</a>
</ul>

<hr>
<address>Last updated Juni 06, 2002.</address>
</body>
</html>


